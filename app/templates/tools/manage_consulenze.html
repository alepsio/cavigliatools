{% extends "layouts/base_tool.html" %}

{% block title %}Gestione Consulenze Assicurative{% endblock %}


{% block sidebar_sections %}
<a href="{{ url_for('manage_consulenze.index') }}">üë§ Anagrafica Clienti</a>
<a href="{{ url_for('manage_consulenze.panoramica') }}">üìä Panoramica</a>
<a href="{{ url_for('manage_consulenze.questionari') }}">üìù Questionari PDF</a>
<a href="{{ url_for('manage_consulenze.gestione_email') }}" class="">üì® Configurazione Email</a>
{% endblock %}

{% block content %}
<h2 class="mb-4">Gestione Consulenze Assicurative</h2>



<form action="{{ url_for('manage_consulenze.salva_cliente') }}" method="POST" enctype="multipart/form-data">
    <div class="row g-3">
  
      <!-- Identit√† -->
      <div class="col-12">
        <h5 class="mb-2 mt-3 text-primary">üë§ Dati Anagrafici</h5>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="cognome" placeholder="Cognome" required>
        <label>Cognome</label>
      </div>
      
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="nome" placeholder="Nome" required>
        <label>Nome</label>
      </div>      
  
      <div class="col-md-3 form-floating">
        <input type="date" class="form-control" name="data_nascita" required>
        <label>Data di nascita</label>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="luogo_nascita" placeholder="Luogo di nascita">
        <label>Luogo di nascita</label>
      </div>
  
      <div class="col-md-6 form-floating">
        <input type="text" class="form-control" name="codice_fiscale" placeholder="Codice Fiscale" required>
        <label>Codice Fiscale</label>
      </div>
  
      <div class="col-md-6 form-floating">
        <input type="text" class="form-control" name="partita_iva" placeholder="Partita IVA">
        <label>Partita IVA</label>
      </div>
  
      <!-- Lavoro e Iscrizioni -->
      <div class="col-12">
        <h5 class="mb-2 mt-4 text-primary">üíº Dati Professionali</h5>
      </div>
  
      <div class="col-md-6 form-floating">
        <input type="text" class="form-control" name="attivita" placeholder="Attivit√† Professionale">
        <label>Attivit√† Professionale</label>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="date" class="form-control" name="inizio_attivita">
        <label>Data Inizio Attivit√†</label>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="num_albo" placeholder="Numero Albo">
        <label>N¬∞ Iscrizione Albo</label>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="date" class="form-control" name="data_albo">
        <label>Data Iscrizione Albo</label>
      </div>
  
      <!-- Contatti -->
      <div class="col-12">
        <h5 class="mb-2 mt-4 text-primary">üì¨ Contatti e Sedi</h5>
      </div>

      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="residenza" placeholder="Via/Piazza">
        <label>Indirizzo Residenza</label>
      </div>
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="comune_residenza" placeholder="Comune">
        <label>Comune Residenza</label>
      </div>
      <div class="col-md-2 form-floating">
        <input type="text" class="form-control" name="cap_residenza" placeholder="CAP">
        <label>CAP Residenza</label>
      </div>

      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="domicilio" placeholder="Via/Piazza">
        <label>Domicilio Fiscale</label>
      </div>
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="comune_domicilio" placeholder="Comune">
        <label>Comune Domicilio</label>
      </div>
      <div class="col-md-2 form-floating">
        <input type="text" class="form-control" name="cap_domicilio" placeholder="CAP">
        <label>CAP Domicilio</label>
      </div>

      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="ubicazione" placeholder="Via/Piazza">
        <label>Ubicazione Studio</label>
      </div>
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="comune_studio" placeholder="Comune">
        <label>Comune Studio</label>
      </div>
      <div class="col-md-2 form-floating">
        <input type="text" class="form-control" name="cap_studio" placeholder="CAP">
        <label>CAP Studio</label>
      </div>

      <div class="col-md-6 form-floating">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" name="email" placeholder="email@example.com" required>
      </div>

      <div class="col-md-6 form-floating">
        <input type="email" class="form-control" name="pec" placeholder="PEC">
        <label>PEC</label>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="text" class="form-control" name="codice_univoco" placeholder="Codice Univoco">
        <label>Codice Univoco</label>
      </div>
  
      <div class="col-md-3 form-floating">
        <input type="tel" class="form-control" name="cellulare" placeholder="Cellulare" required>
        <label>Cellulare</label>
      </div>
  
      <!-- Documenti -->
      <div class="col-12">
        <h5 class="mb-2 mt-4 text-primary">üìé Documenti</h5>
      </div>
  
      <div class="col-md-4">
        <label>Documento Identit√† (fronte)</label>
        <input type="file" name="doc_fronte" class="form-control">
      </div>
  
      <div class="col-md-4">
        <label>Documento Identit√† (retro)</label>
        <input type="file" name="doc_retro" class="form-control">
      </div>
  
      <div class="col-md-6 form-floating">
        <input type="text" class="form-control" name="compagnia_precedente" placeholder="Compagnia">
        <label>Compagnia Assicurativa Precedente</label>
      </div>
      
      <div class="col-md-6">
        <label>Polizza Assicurativa Precedente (PDF)</label>
        <input type="file" name="polizza_precedente" class="form-control">
      </div>      
  
      <!-- Fatturati e Personale -->
      <div class="col-12">
        <h5 class="mb-2 mt-4 text-primary">üìä Attivit√†</h5>
      </div>
  
      <div class="col-md-6 form-floating">
        <input type="number" class="form-control" name="fatturato_2024" placeholder="Fatturato 2024">
        <label>Fatturato 2024</label>
      </div>
  
      <div class="col-md-6 form-floating">
        <input type="number" class="form-control" name="fatturato_2025" placeholder="Fatturato Stima 2025">
        <label>Fatturato Stima 2025</label>
      </div>
  
      <div class="col-md-4 form-floating">
        <select class="form-select" name="dipendenti">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Personale Dipendente</label>
      </div>
  
      <div class="col-md-4 form-floating">
        <select class="form-select" name="addetti">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Addetti</label>
      </div>
  
      <div class="col-md-4 form-floating">
        <select class="form-select" name="subappaltatori">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Subappaltatori</label>
      </div>

      <div class="col-md-4 form-floating">
        <select class="form-select" name="collaboratori">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Altri Collaboratori</label>
      </div>
      
      <div class="col-md-4 form-floating">
        <select class="form-select" name="sedi_estere">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Sedi Estere</label>
      </div>
      
      <div class="col-md-4 form-floating">
        <select class="form-select" name="clienti_estero">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Clienti Esteri</label>
      </div>
      
      <div class="col-md-4 form-floating">
        <select class="form-select" name="fornitori_estero">
          <option value="No">No</option><option value="S√¨">S√¨</option>
        </select>
        <label>Fornitori Esteri</label>
      </div>
      
      
  
      <!-- Bottone -->
      <div class="col-12 mt-4">
        <button type="submit" class="btn btn-primary px-4">
          üíæ Salva Cliente
        </button>
      </div>
    </div>
  </form>
  
  
<div id="questionario" class="section" style="display: none;">
<p>‚öôÔ∏è Area dedicata alla generazione e compilazione automatica dei PDF questionari cliente.</p>
</div>




<div id="polizze" class="section" style="display: none;">
  <p>‚öôÔ∏è Qui si gestiranno le polizze da associare ai clienti (RCA, Vita, Infortuni, ecc).</p>
</div>



<div id="scadenze" class="section" style="display: none;">
  <p>‚öôÔ∏è In questa sezione verranno mostrate le scadenze future e impostate le email automatiche.</p>
</div>

<script>
function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
  document.getElementById(id).style.display = 'block';

  document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active-link'));
  event.target.classList.add('active-link');
}
</script>
{% endblock %}
